# DataEngineer_task_5_GE

Проверки уровня таблицы:
1. Таблица должна содержать 8 столбцов
2. Таблица должна содержать именно эти столбцы в порядке, как перечислены: user_id, pay_doc_type, pay_doc_num, account, phone, billing_period, pay_date, sum
Обе проверки сгенерированы по умолчанию, решено их оставить, т.к. помогают контролировать целостность источника

Проверки уровня полей:

**account**
1. Значения не должны быть NULL
2. Значения должны соответствовать шаблону [FL-]+ (т.е. начинаться с символов "FL-").
Выбраны эти проверки, т.к. account является бизнес-ключом, и корректность значения этого поля критична.
Можно обойтись только второй проверкой, которая в т.ч. отлавливала бы NULL, но решено оставить обе, чтобы разделить проблемы.
Поле account в тестовой таблице всегда содержит значения, соответствующие шаблону: скорее всего FL означает "физ.лицо", и если бы были примеры данных с аккаунтами юр.лиц, можно было вместо этой проверки добавить проверку expect_column_values_to_match_regex_list (соответствие какому-либо из шаблонов в списке). Также можно было обозначить, что после "FL-" должны идти только цифры.

**pay_date**
1. Значения не должны быть NULL
2. Значения должны быть больше или равны 2012-01-05 00:00:00 и меньше или равны текущей дате/времени.
Первая проверка идёт по умолчанию в GE, и она необходима, т.к. платежа без даты быть не может.
Вторая проверка была также по умолчанию, но была переделана: в качестве верхней границы возможных значений взят текущий момент времени, т.к. платёж не может быть "из будущего".
**pay_doc_num**

1. Значения не должны быть NULL
2. Значения должны быть уникальны.
Первая проверка идёт по умолчанию в GE и она необходима, т.к. по смыслу данной таблицы это поле по идее является её первичным ключом (номер платёжного документа). По этой же причине выбрана вторая проверка: такой номер должен быть уникальным и однозначно определять платёж. Однако вторая проверка не была пройдена: обнаружено небольшое количество дублирующихся значений pay_doc_num. Возможно полностью задублированы строки, но такого быть тоже не должно.
**pay_doc_type**

1. Значения не должны быть NULL
2. Значения должны быть из списка [MASTER, MIR, VISA].
Обе проверки стандартные и были оставлены для контроля корректности заполнения данного поля, а также на случай, если в таблице появятся платежи из других платежных систем, которые, например, покаким-то причинам здесь не должны присутствовать.
**sum**

1. Значения должны быть нумерическими
Внедрена данная проверка для контроля корректности заполнения поля (т.к. это деньги - они должны быть числом) и, например, предотвращения ошибок при создании каких-нибудь аггрегирующих отчётов, которые будут суммировать значения.
